(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{120:function(e,t,n){},435:function(e,t,n){},440:function(e,t,n){"use strict";n.r(t);n(199),n(141),n(249);var a=n(192),r=n.n(a),c=n(196),s=n(39),o=n(4),i=n(2),l=n.n(i),u=n(45),j=n(33),d=n.n(j),b=(n(120),n(1));function h(){var e=Object(i.useState)({email:"",password:"",emailExist:null,passCorrect:null,error:null}),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(i.useContext)(E).dispatch;function c(){return(c=Object(u.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"React POST Request Example",data:n})},fetch("/login",c).then((function(e){if(401===e.status){var t={passCorrect:!1};a((function(e){return Object(o.a)(Object(o.a)({},e),t)}))}else if(400===e.status){var n={emailExist:!1};a((function(e){return Object(o.a)(Object(o.a)({},e),n)}))}return e.json()})).then((function(e){console.log(e),r({type:"LOGIN",payload:e})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)("div",{className:"login",children:Object(b.jsxs)("div",{className:"loginCard",children:[Object(b.jsxs)("form",{id:"loginCardItems",className:"form-control",onSubmit:function(e){return function(e){return c.apply(this,arguments)}(e)},method:"post",children:[Object(b.jsx)("label",{for:"email",children:"Email:"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"email",name:"email",placeholder:"Enter Email",onChange:function(e){return function(e){var t={email:e.target.value};a((function(e){return Object(o.a)(Object(o.a)({},e),t)}))}(e)},required:!0}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{for:"pass",children:"Password:"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"password",name:"pass",placeholder:"Enter Password",onChange:function(e){return function(e){var t={password:e.target.value};a((function(e){return Object(o.a)(Object(o.a)({},e),t)}))}(e)},required:!0}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn btn-primary",children:"Login"})]}),Object(b.jsx)("div",{children:Object(b.jsx)("a",{id:"noacc",href:"/register",children:" Don't have an account?"})}),Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:!1===n.emailExist?Object(b.jsx)("p",{className:"emailTaken",children:"Email doesn't exist"}):!1===n.passCorrect?Object(b.jsx)("p",{className:"emailTaken",children:"Wrong Password"}):!0===n.error?Object(b.jsx)("p",{className:"emailTaken",children:"Server error"}):null})})]})})}n(435);var O={userInput:"",toDoList:[],vis:[],greentick:[]};function p(e){var t=(new Date).toLocaleTimeString();return Object(b.jsxs)("div",{className:"timeSelect",children:[Object(b.jsx)("label",{children:"Set Time:"}),Object(b.jsx)("input",{type:"time",id:"appt",name:"appt",onChange:e.onChange,defaultValue:t.slice(0,5),required:!0})]})}function m(e){var t=new Date,n=t.toISOString().substr(0,10),a=t.toLocaleTimeString().slice(0,5),r=l.a.useState({date:n,time:a,todo:e.item}),c=Object(s.a)(r,2),i=c[0],u=c[1];return Object(b.jsxs)("div",{className:e.style2||e.style,children:[Object(b.jsx)("label",{children:"Enter deadline:"}),Object(b.jsx)("input",{type:"date",id:"start",onChange:function(e){return function(e){var t={date:e.target.value};u((function(e){return Object(o.a)(Object(o.a)({},e),t)}))}(e)},defaultValue:n,name:"trip-start",min:"2020-01-01",max:"2099-12-31"}),Object(b.jsx)(p,{onChange:function(e){return function(e){var t={time:e.target.value};console.log(t),u((function(e){return Object(o.a)(Object(o.a)({},e),t)}))}(e)}}),Object(b.jsx)("button",{id:"setReminder",className:e.submitStyle,onClick:e.onClick,value:JSON.stringify(i),children:"Set Reminder"})]})}var f=function(e){var t=l.a.useState({userInput:"",toDoList:[],serverList:[],vis:[],greentick:[]}),n=Object(s.a)(t,2),a=n[0],r=n[1],c=l.a.useContext(E).dispatch,i=function(e){var t=/^[a-zA-Z0-9_]+$/g;return e.some((function(e){return t.test(e)}))}(a.toDoList)||0!==a.toDoList.length?a.toDoList.map((function(t,n){return""===t?null:Object(b.jsxs)("div",{children:[Object(b.jsxs)("li",{className:"btn1",children:[t,Object(b.jsx)("span",{onClick:function(){return e=n,a.vis.splice(e,1,!a.vis[e]),void r((function(e){return Object(o.a)(Object(o.a)({},e),a.vis)}));var e},className:a.greentick[n]?"clock2":"clock",children:"\ud83d\udd51"}),Object(b.jsx)("span",{className:a.greentick[n]?"greenTick1":"greenTick2",children:"\u2705"})]},n),Object(b.jsx)(m,{onClick:function(t){!function(t,n){var s=JSON.parse(t.target.value);a.greentick.splice(n,1,!a.greentick[n]),r((function(e){return console.log(e,s),console.log(Object(o.a)(Object(o.a)({},e),{},{obj:s})),Object(o.a)(Object(o.a)({},e),{},{obj:s})}));var i=Object(o.a)({},e.user);i.log.push(s),console.log(i);var l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:i})};fetch("/addTodo",l).then((function(e){return e.json()})).then((function(e){return console.log(e),e})).then((function(e){return c({type:"SETREMINDER",payload:e})}))}(t,n)},item:t,style:a.vis[n]?"calendar1":"calendar2",style2:a.greentick[n]?"calendar2":"calendar1",submitStyle:a.greentick[n]?"submitted":"notsubmitted"})]},n)})):Object(b.jsx)("h1",{children:"Enter your tasks separated by commas"}),u=e.user.overdue.map((function(t,n){return Object(b.jsxs)("li",{className:"row overdueitems",children:["Task:".concat(t.todo,", date: ").concat(t.date,", time:").concat(t.time),Object(b.jsxs)("span",{className:"close",onClick:function(){return function(t){console.log(a);var n=Object(o.a)({},e.user),r=n.overdue.splice(t,1);console.log(r);var s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:n,Item:r})};fetch("/removeOverdue",s).then((function(e){return e.json()})).then((function(e){return c({type:"SETREMINDER",payload:e})}))}(n)},children:["X",Object(b.jsx)("span",{class:"tooltiptext",children:"Delete Reminder?"})]}),Object(b.jsxs)("span",{className:"done",onClick:function(){return function(t){console.log(a);var n=Object(o.a)({},e.user),r=n.overdue.splice(t,1);console.log(r);var s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:n,Item:r})};fetch("/overdueDone",s).then((function(e){return e.json()})).then((function(e){return c({type:"SETREMINDER",payload:e})}))}(n)},children:["\u2705",Object(b.jsx)("span",{class:"tooltiptext",children:"Complete?"})]})]},n)})),j=e.user.log.map((function(t,n){return Object(b.jsxs)("li",{className:"row listitems",children:["Task:".concat(t.todo,", date: ").concat(t.date,", time:").concat(t.time),Object(b.jsxs)("span",{className:"close",onClick:function(){return function(t){console.log(a);var n=Object(o.a)({},e.user),r=n.log.splice(t,1);console.log(r);var s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:n,Item:r})};fetch("/removeTodo",s).then((function(e){return e.json()})).then((function(e){return c({type:"SETREMINDER",payload:e})}))}(n)},children:["X",Object(b.jsx)("span",{class:"tooltiptext",children:"Delete Reminder?"})]}),Object(b.jsxs)("span",{className:"done",onClick:function(){return function(t){console.log(a);var n=Object(o.a)({},e.user),r=n.log.splice(t,1);console.log(r);var s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:n,Item:r})};fetch("/dueDone",s).then((function(e){return e.json()})).then((function(e){return c({type:"SETREMINDER",payload:e})}))}(n)},children:["\u2705",Object(b.jsx)("span",{class:"tooltiptext",children:"Complete?"})]})]},n)}));return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsxs)("h1",{className:"card text-center border-primary mb-3",children:["Hello ",e.user.username,' here\'s your "To Do" List:']}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"card text-center",children:[Object(b.jsx)("h2",{children:"Your overdue Tasks:"}),Object(b.jsx)("ul",{children:u})]}),Object(b.jsxs)("div",{className:"card text-center",children:[Object(b.jsx)("h2",{children:"You will be emailed the following reminders:"}),Object(b.jsx)("ul",{children:j})]})]}),Object(b.jsx)("button",{onClick:function(){return function(){var e=document.getElementById("textArea");console.log(e),e.classList.toggle("active")}()},children:"+ Items"}),Object(b.jsxs)("div",{id:"textArea",children:[Object(b.jsx)("div",{id:"card",children:Object(b.jsx)("ul",{children:i})}),Object(b.jsx)("div",{children:Object(b.jsx)("textarea",{onChange:function(e){return function(e){var t={userInput:e.target.value};console.log(t),r((function(e){return Object(o.a)(Object(o.a)({},e),t)})),console.log(a)}(e)},value:a.userInput,placeholder:"Separate Tasks With Commas"})}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn btn-primary",onClick:function(){return function(){var e=a.userInput.split(",");""===e[e.length-1]&&e.pop();for(var t=[],n=0;n<e.length;n++)t.push(!0),a.greentick.push(!1);var c={toDoList:e,vis:t};console.log(c),r((function(e){return Object(o.a)(Object(o.a)({},e),c)}))}()},children:"Create List"}),Object(b.jsx)("button",{className:"btn btn-danger",onClick:function(){r((function(e){return Object(o.a)(Object(o.a)({},e),O)}))},children:"Clear List"})]})]})};var x=function(e){var t=Object(i.useContext)(E).dispatch;function n(){return(n=Object(u.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.confirm("Are you sure you want to delete?"),console.log(n,!n),a=JSON.parse(localStorage.getItem("user")),console.log(a),!n){e.next=17;break}return t.preventDefault(),e.prev=6,r={method:"DELETE",headers:{"Content-Type":"application/json"}},e.next=10,fetch("/".concat(a._id),r);case 10:localStorage.clear(),window.location.href="/remove",e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.warn(e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)}return e.authed?Object(b.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(b.jsxs)("ul",{className:"navbar navbar-text navbar-expand-lg",children:[Object(b.jsx)("li",{className:"navbar-brand",children:Object(b.jsx)("a",{href:"/",children:"Home"})}),Object(b.jsx)("li",{className:"navbar-brand",children:Object(b.jsx)("a",{href:"/completed",children:"Complete"})}),Object(b.jsx)("li",{className:"navbar-brand",children:Object(b.jsx)("a",{href:"/logout",onClick:function(){return t({type:"LOGOUT"})},children:"Logout"})}),Object(b.jsx)("li",{className:"navbar-brand",children:Object(b.jsx)("a",{href:"/",onClick:function(e){return function(e){return n.apply(this,arguments)}(e)},children:"Delete account"})})]})}):Object(b.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(b.jsxs)("ul",{className:"navbar navbar-light navbar-expand-lg",children:[Object(b.jsx)("li",{className:"navbar-brand",children:Object(b.jsx)("a",{href:"/",children:"Login"})}),Object(b.jsx)("li",{className:"navbar-brand",children:Object(b.jsx)("a",{href:"/register",children:"Register"})})]})})};function v(){var e=Object(i.useState)({email:"",user:"",password:"",emailAuth:null,serverResponse:null}),t=Object(s.a)(e,2),n=t[0],a=t[1];function r(){return(r=Object(u.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"React POST Request Example",data:n})},fetch("/register",r).then((function(e){if(400===e.status){var t={emailAuth:!1,serverResponse:e.text()};a((function(e){return Object(o.a)(Object(o.a)({},e),t)}))}else if(200===e.status){var n={emailAuth:!0,serverResponse:e.text()};a((function(e){return Object(o.a)(Object(o.a)({},e),n)}))}}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)("div",{className:"reg",children:Object(b.jsxs)("div",{id:"loginCard",children:[Object(b.jsxs)("form",{id:"loginCardItems",className:"form-control",onSubmit:function(e){return function(e){return r.apply(this,arguments)}(e)},children:[Object(b.jsx)("label",{for:"email",children:"Email:"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"email",name:"email",placeholder:"Enter Email",onChange:function(e){return function(e){var t={email:e.target.value};a((function(e){return Object(o.a)(Object(o.a)({},e),t)}))}(e)},required:!0}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{for:"email",children:"First Name:"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"text",name:"email",placeholder:"Enter your name",onChange:function(e){return function(e){var t={user:e.target.value};a((function(e){return Object(o.a)(Object(o.a)({},e),t)}))}(e)},required:!0}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{for:"pass",children:"Password:"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"password",name:"pass",placeholder:"Enter Password",onChange:function(e){return function(e){var t={password:e.target.value};a((function(e){return Object(o.a)(Object(o.a)({},e),t)}))}(e)},required:!0}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn btn-primary",children:"Register"})]}),Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:!1===n.emailAuth?Object(b.jsx)("p",{className:"emailTaken",children:"Email already taken"}):!0===n.emailAuth?Object(b.jsx)("p",{className:"emailRegistered",children:"Succesfully registered. Check your email!"}):null})})]})})}var g=function(e){var t=l.a.useContext(E).dispatch,n=e.user.done.map((function(n,a){return Object(b.jsxs)("li",{className:"row",children:["Task:".concat(n.todo,", date: ").concat(n.date,", time:").concat(n.time),Object(b.jsxs)("span",{className:"close",onClick:function(){return function(n){var a=Object(o.a)({},e.user),r=a.done.splice(n,1);console.log(r);var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:a,Item:r})};fetch("/removeDone",c).then((function(e){return e.json()})).then((function(e){return t({type:"SETREMINDER",payload:e})}))}(a)},children:["X",Object(b.jsx)("span",{class:"tooltiptext",children:"Delete?"})]})]},a)}));return Object(b.jsxs)("div",{className:"card border-primary mb-3",children:[Object(b.jsx)("h1",{className:"text-center",children:"Your completed tasks:"}),Object(b.jsx)("ul",{children:n})]})},y=n(193),N=n(194),S=n(198),k=n(197),C=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).state={data:null},a}return Object(N.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{"Content-Type":"application/json"}},e.next=3,fetch("/admin/users/authed",t).then((function(e){return e.json()})).then((function(e){return n.setState({data:e}),e})).then((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"listUsers",value:function(e){return e.map((function(e){return Object(b.jsxs)("li",{children:[Object(b.jsxs)("p",{children:["Email:",e.email]}),"ID: ",e._id,Object(b.jsx)("p",{})]})}))}},{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Only Admin should see this page"}),Object(b.jsx)("ol",{children:this.state.data?this.listUsers(this.state.data):null})]})}}]),n}(i.Component),T=C;function w(){return Object(b.jsx)("div",{className:"login",children:Object(b.jsx)("h1",{children:"You've logged out"})})}var E=l.a.createContext(),I=JSON.parse(localStorage.getItem("user"))?JSON.parse(localStorage.getItem("user")):null;console.log("YOUR DISPtcth is"+I);var D={isAuthenticated:!1,user:I,token:localStorage.getItem("token")},R=function(e,t){switch(t.type){case"LOGIN":return localStorage.setItem("user",JSON.stringify(t.payload.user)),localStorage.setItem("token",JSON.stringify(t.payload.token)),Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!0,user:t.payload.user,token:t.payload.token});case"LOGOUT":return localStorage.clear(),Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!1,user:null});case"SETREMINDER":case"UPDATECENTRALSTATE":return localStorage.removeItem("user"),localStorage.setItem("user",JSON.stringify(t.payload)),Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!0,user:t.payload});default:return e}};function L(e){return"/"===window.location.pathname?e.authed?Object(b.jsx)(f,{user:e.user}):Object(b.jsx)(h,{}):"/completed"===window.location.pathname?e.authed?Object(b.jsx)(g,{user:e.user}):Object(b.jsx)(h,{}):"/register"===window.location.pathname?Object(b.jsx)(v,{}):"/login"===window.location.pathname?Object(b.jsx)(h,{}):"/logout"===window.location.pathname?Object(b.jsx)(w,{}):"/remove"===window.location.pathname?Object(b.jsx)("h1",{children:"Account deleted"}):"/admin/users"===window.location.pathname?e.user&&"m.w.g.nelson@gmail.com"===e.user.email?Object(b.jsx)(T,{}):Object(b.jsx)("h1",{children:"Youre not authorised to view this page"}):Object(b.jsx)("h1",{children:"404 Not Found!"})}function A(){var e=l.a.useReducer(R,D),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(b.jsxs)(E.Provider,{value:{state:n,dispatch:a},children:[" ",Object(b.jsx)(x,{authed:n.token}),Object(b.jsx)(L,{authed:n.token,user:n.user})]})}r.a.render(Object(b.jsx)(c.a,{children:Object(b.jsx)(A,{})}),document.getElementById("root"))}},[[440,1,2]]]);
//# sourceMappingURL=main.a7e5d296.chunk.js.map