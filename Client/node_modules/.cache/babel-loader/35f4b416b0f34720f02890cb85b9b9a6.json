{"ast":null,"code":"import _objectSpread from\"/home/tank/Desktop/TODO/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/tank/Desktop/TODO/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";//This is the functional component definition \n//Its needed in order to use react hooks \nimport'./App.css';import React from'react';import{AuthContext}from'../App';var initialState={userInput:\"\",toDoList:[],vis:[],greentick:[]};function inputValidator(arr){var Regex=/^[a-zA-Z0-9_]+$/g;var result=arr.some(function(e){return Regex.test(e);});return result;}function TimePicker(props){var curr=new Date();//var t = curr.toISOString(); this doesnt account for BST/GMT +1!!\n//I changed it to LocaleTimeString as below\nvar t=curr.toLocaleTimeString();return/*#__PURE__*/_jsxs(\"div\",{className:\"timeSelect\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Set Time:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",id:\"appt\",name:\"appt\",onChange:props.onChange,defaultValue:t.slice(0,5),required:true})]});}function Calendar(props){var curr=new Date();var dt=curr.toISOString().substr(0,10);var tt=curr.toLocaleTimeString().slice(0,5);var _React$useState=React.useState({date:dt,time:tt,todo:props.item}),_React$useState2=_slicedToArray(_React$useState,2),timeline=_React$useState2[0],setTime=_React$useState2[1];function handleTime(e){var newObj={time:e.target.value};console.log(newObj);setTime(function(oldObj){return _objectSpread(_objectSpread({},oldObj),newObj);});}function handleDate(e){var newObj={date:e.target.value};setTime(function(oldObj){return _objectSpread(_objectSpread({},oldObj),newObj);});}return/*#__PURE__*/_jsxs(\"div\",{className:props.style2||props.style,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Enter deadline:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"start\",onChange:function onChange(e){return handleDate(e);},defaultValue:dt,name:\"trip-start\",min:\"2020-01-01\",max:\"2021-12-31\"}),/*#__PURE__*/_jsx(TimePicker,{onChange:function onChange(e){return handleTime(e);}}),/*#__PURE__*/_jsx(\"button\",{className:props.submitStyle,onClick:props.onClick,value:JSON.stringify(timeline),children:\"Set Reminder\"})]});}function MyToDoComp(props){var _React$useState3=React.useState({userInput:\"\",toDoList:[],serverList:[],vis:[],greentick:[]}),_React$useState4=_slicedToArray(_React$useState3,2),AppState=_React$useState4[0],setParams=_React$useState4[1];var _React$useContext=React.useContext(AuthContext),dispatch=_React$useContext.dispatch;function updateCentralState(){var requestOptions={method:'POST',//mode: 'cors',\nheaders:{'Content-Type':'application/json'},body:JSON.stringify({data:props.user})};fetch('/updateCentralState',requestOptions).then(function(res){return res.json();}).then(function(resJSON){return dispatch({type:\"UPDATECENTRALSTATE\",payload:resJSON});});}React.useEffect(function(){setInterval(function(){updateCentralState();},30000);});function clear(){setParams(function(old){return _objectSpread(_objectSpread({},old),initialState);});}function setTime(e){AppState.vis.splice(e,1,!AppState.vis[e]);setParams(function(old){return _objectSpread(_objectSpread({},old),AppState.vis);});}function handleSubmit(){var itemsArray=AppState.userInput.split(',');if(itemsArray[itemsArray.length-1]===\"\")itemsArray.pop();var visi=[];for(var i=0;i<itemsArray.length;i++){visi.push(true);AppState.greentick.push(false);}var newObj={toDoList:itemsArray,vis:visi};setParams(function(old){return _objectSpread(_objectSpread({},old),newObj);});}function handleChange(e){var newO={userInput:e.target.value};console.log(newO);setParams(function(old){return _objectSpread(_objectSpread({},old),newO);});console.log(AppState);}function removeOverdue(i){console.log(AppState);var newObj=_objectSpread({},props.user);var item=newObj.overdue.splice(i,1);console.log(item);var requestOptions={method:'POST',//mode: 'cors',\nheaders:{'Content-Type':'application/json'},body:JSON.stringify({data:newObj,Item:item})};fetch('/removeOverdue',requestOptions).then(function(res){return res.json();}).then(function(resJSON){return dispatch({type:\"SETREMINDER\",payload:resJSON});});}function removeReminder(i){console.log(AppState);var newObj=_objectSpread({},props.user);var item=newObj.log.splice(i,1);console.log(item);var requestOptions={method:'POST',//mode: 'cors',\nheaders:{'Content-Type':'application/json'},body:JSON.stringify({data:newObj,Item:item})};fetch('/removeTodo',requestOptions).then(function(res){return res.json();})//.then(resJSON=>console.log(resJSON))\n.then(function(resJSON){return dispatch({type:\"SETREMINDER\",payload:resJSON});});}function dueDone(i){console.log(AppState);var newObj=_objectSpread({},props.user);var item=newObj.log.splice(i,1);console.log(item);var requestOptions={method:'POST',//mode: 'cors',\nheaders:{'Content-Type':'application/json'},body:JSON.stringify({data:newObj,Item:item})};fetch('/dueDone',requestOptions).then(function(res){return res.json();})//.then(resJSON=>console.log(resJSON))\n.then(function(resJSON){return dispatch({type:\"SETREMINDER\",payload:resJSON});});}function overdueDone(i){console.log(AppState);var newObj=_objectSpread({},props.user);var item=newObj.overdue.splice(i,1);console.log(item);var requestOptions={method:'POST',//mode: 'cors',\nheaders:{'Content-Type':'application/json'},body:JSON.stringify({data:newObj,Item:item})};fetch('/overdueDone',requestOptions).then(function(res){return res.json();})//.then(resJSON=>console.log(resJSON))\n.then(function(resJSON){return dispatch({type:\"SETREMINDER\",payload:resJSON});});}function submitToServer(e,index){var obj=JSON.parse(e.target.value);console.log(e,index);AppState.greentick.splice(index,1,!AppState.greentick[index]);setParams(function(old){console.log(old,obj);console.log(_objectSpread(_objectSpread({},old),{},{obj:obj}));return _objectSpread(_objectSpread({},old),{},{obj:obj});});var newObj=_objectSpread({},props.user);newObj.log.push(obj);var requestOptions={method:'POST',//mode: 'cors',\nheaders:{'Content-Type':'application/json'},body:JSON.stringify({data:newObj})};fetch('/addTodo',requestOptions).then(function(res){return res.json();})//.then(resJSON=>console.log(resJSON))\n.then(function(resJSON){return dispatch({type:\"SETREMINDER\",payload:resJSON});});}console.log(props.user);var items=!inputValidator(AppState.toDoList)&&AppState.toDoList.length===0?/*#__PURE__*/_jsx(\"h1\",{children:\"Enter some valid tasks separated by commas\"}):AppState.toDoList.map(function(d,index){return d===\"\"?null:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"li\",{className:\"btn1\",children:[d,/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setTime(index);},className:AppState.greentick[index]?\"clock2\":\"clock\",children:\"\\uD83D\\uDD51\"}),/*#__PURE__*/_jsx(\"span\",{className:AppState.greentick[index]?\"greenTick1\":\"greenTick2\",children:\"\\u2705\"})]},index),/*#__PURE__*/_jsx(Calendar,{onClick:function onClick(e){submitToServer(e,index);},item:d,style:AppState.vis[index]?\"calendar1\":\"calendar2\",style2:AppState.greentick[index]?\"calendar2\":\"calendar1\",submitStyle:AppState.greentick[index]?\"submitted\":\"notsubmitted\"})]},index);});var items2=props.user.overdue.map(function(d,i){return/*#__PURE__*/_jsxs(\"li\",{children:[\"Task:\".concat(d.todo,\", date: \").concat(d.date,\", time:\").concat(d.time),/*#__PURE__*/_jsxs(\"span\",{className:\"close\",onClick:function onClick(){return removeOverdue(i);},children:[\"X\",/*#__PURE__*/_jsx(\"span\",{class:\"tooltiptext\",children:\"Delete Reminder?\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"done\",onClick:function onClick(){return overdueDone(i);},children:[\"\\u2705\",/*#__PURE__*/_jsx(\"span\",{class:\"tooltiptext\",children:\"Complete?\"})]})]},i);});var items3=props.user.log.map(function(d,i){return/*#__PURE__*/_jsxs(\"li\",{children:[\"Task:\".concat(d.todo,\", date: \").concat(d.date,\", time:\").concat(d.time),/*#__PURE__*/_jsxs(\"span\",{className:\"close\",onClick:function onClick(){return removeReminder(i);},children:[\"X\",/*#__PURE__*/_jsx(\"span\",{class:\"tooltiptext\",children:\"Delete Reminder?\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"done\",onClick:function onClick(){return dueDone(i);},children:[\"\\u2705\",/*#__PURE__*/_jsx(\"span\",{class:\"tooltiptext\",children:\"Complete?\"})]})]},i);});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{id:\"box\",children:[\"Hello \",props.user.username,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Your \\\"To Do\\\" List:\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"CssFlex\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"overdue\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your overdue Tasks:\"}),/*#__PURE__*/_jsx(\"ul\",{children:items2})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"readyToPlan\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"You will be emailed the following reminders:\"}),/*#__PURE__*/_jsx(\"ul\",{children:items3})]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"textArea\",children:[/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){return handleChange(e);},value:AppState.userInput,placeholder:\"Separate Tasks With Commas\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{id:\"createList\",onClick:function onClick(){return handleSubmit();},children:\"Create List\"}),/*#__PURE__*/_jsx(\"button\",{id:\"clearList\",onClick:function onClick(){return clear();},children:\"Clear List\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"card\",children:/*#__PURE__*/_jsx(\"ul\",{children:items})})]});}export default MyToDoComp;","map":{"version":3,"sources":["/home/tank/Desktop/TODO/Client/src/containers/Todo.js"],"names":["React","AuthContext","initialState","userInput","toDoList","vis","greentick","inputValidator","arr","Regex","result","some","e","test","TimePicker","props","curr","Date","t","toLocaleTimeString","onChange","slice","Calendar","dt","toISOString","substr","tt","useState","date","time","todo","item","timeline","setTime","handleTime","newObj","target","value","console","log","oldObj","handleDate","style2","style","submitStyle","onClick","JSON","stringify","MyToDoComp","serverList","AppState","setParams","useContext","dispatch","updateCentralState","requestOptions","method","headers","body","data","user","fetch","then","res","json","resJSON","type","payload","useEffect","setInterval","clear","old","splice","handleSubmit","itemsArray","split","length","pop","visi","i","push","handleChange","newO","removeOverdue","overdue","Item","removeReminder","dueDone","overdueDone","submitToServer","index","obj","parse","items","map","d","items2","items3","username"],"mappings":"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","sourcesContent":["//This is the functional component definition \n//Its needed in order to use react hooks \nimport './App.css';\nimport React from 'react';\n\nimport { AuthContext } from '../App'\n\n\n\n\nconst initialState = {\n  userInput: \"\", toDoList: [], vis: [],\n  greentick: []\n}\n\nfunction inputValidator(arr) {\n  var Regex = /^[a-zA-Z0-9_]+$/g\n  var result = arr.some(e => Regex.test(e));\n  return result\n}\n\n\n\n\n\nfunction TimePicker(props) {\n  var curr = new Date();\n  //var t = curr.toISOString(); this doesnt account for BST/GMT +1!!\n  //I changed it to LocaleTimeString as below\n  var t = curr.toLocaleTimeString()\n  return (\n    <div className=\"timeSelect\"><label>Set Time:</label>\n      <input type=\"time\" id=\"appt\" name=\"appt\"\n         onChange={props.onChange} defaultValue={t.slice(0, 5)} required></input></div>)\n}\n\nfunction Calendar(props) {\n\n  var curr = new Date();\n  var dt = curr.toISOString().substr(0, 10);\n  var tt = curr.toLocaleTimeString().slice(0, 5);\n  let [timeline, setTime] = React.useState({ date: dt, time: tt, todo: props.item });\n\n  function handleTime(e) {\n    const newObj = { time: e.target.value }\n    console.log(newObj)\n    setTime(oldObj => {\n      return { ...oldObj, ...newObj }\n    })\n  }\n\n  function handleDate(e) {\n    const newObj = { date: e.target.value }\n    setTime(oldObj => {\n      return { ...oldObj, ...newObj }\n    })\n  }\n  return (<div className={props.style2 || props.style}>\n    <label >Enter deadline:</label>\n    <input type=\"date\" id=\"start\" onChange={(e) => handleDate(e)} defaultValue={dt} name=\"trip-start\"\n\n      min=\"2020-01-01\" max=\"2021-12-31\"></input><TimePicker onChange={(e) => handleTime(e)} /><button className={props.submitStyle} onClick={props.onClick} value={JSON.stringify(timeline)}>Set Reminder</button></div>)\n\n}\n\n\n\nfunction MyToDoComp(props) {\n  const [AppState, setParams] = React.useState({ userInput: \"\", toDoList: [], serverList: [], vis: [], greentick: [] });\n  const { dispatch } = React.useContext(AuthContext);\n\n\n  function updateCentralState() {\n    const requestOptions = {\n      method: 'POST',\n      //mode: 'cors',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ data: props.user })\n    }\n\n    fetch('/updateCentralState', requestOptions)\n      .then(res => { return res.json() })\n      .then(resJSON => dispatch({ type: \"UPDATECENTRALSTATE\", payload: resJSON }))\n  }\n\n  React.useEffect(() => {\n    setInterval(() => {\n      updateCentralState();\n    }, 30000)\n  })\n\n\n  function clear() {\n    setParams(old => { return { ...old, ...initialState } })\n  }\n\n  function setTime(e) {\n    AppState.vis.splice(e, 1, !AppState.vis[e])\n    setParams(old => {\n      return { ...old, ...AppState.vis }\n    })\n\n  }\n\n  function handleSubmit() {\n\n    const itemsArray = AppState.userInput.split(',');\n    if (itemsArray[itemsArray.length - 1] === \"\") itemsArray.pop()\n    let visi = []\n    for (let i = 0; i < itemsArray.length; i++) {\n      visi.push(true);\n      AppState.greentick.push(false)\n    }\n    let newObj = { toDoList: itemsArray, vis: visi }\n    setParams(old => {\n      return { ...old, ...newObj }\n\n    })\n\n  }\n  function handleChange(e) {\n    let newO = { userInput: e.target.value }\n    console.log(newO)\n    setParams(old => {\n      return { ...old, ...newO }\n    });\n    console.log(AppState)\n  }\n  function removeOverdue(i) {\n    console.log(AppState)\n    let newObj = { ...props.user }\n    let item = newObj.overdue.splice(i, 1)\n    console.log(item)\n    const requestOptions = {\n      method: 'POST',\n      //mode: 'cors',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ data: newObj, Item: item })\n    }\n\n    fetch('/removeOverdue', requestOptions)\n      .then(res => { return res.json() })\n      .then(resJSON => dispatch({ type: \"SETREMINDER\", payload: resJSON }))\n  }\n\n\n  function removeReminder(i) {\n    console.log(AppState)\n    let newObj = { ...props.user }\n    let item = newObj.log.splice(i, 1)\n    console.log(item)\n    const requestOptions = {\n      method: 'POST',\n      //mode: 'cors',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ data: newObj, Item: item })\n    }\n\n    fetch('/removeTodo', requestOptions)\n      .then(res => { return res.json() })\n      //.then(resJSON=>console.log(resJSON))\n      .then(resJSON => dispatch({ type: \"SETREMINDER\", payload: resJSON }))\n  }\n\n  function dueDone(i) {\n    console.log(AppState)\n    let newObj = { ...props.user }\n    let item = newObj.log.splice(i, 1)\n    console.log(item)\n    const requestOptions = {\n      method: 'POST',\n      //mode: 'cors',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ data: newObj, Item: item })\n    }\n\n    fetch('/dueDone', requestOptions)\n      .then(res => { return res.json() })\n      //.then(resJSON=>console.log(resJSON))\n      .then(resJSON => dispatch({ type: \"SETREMINDER\", payload: resJSON }))\n  }\n  function overdueDone(i) {\n    console.log(AppState)\n    let newObj = { ...props.user }\n    let item = newObj.overdue.splice(i, 1)\n    console.log(item)\n    const requestOptions = {\n      method: 'POST',\n      //mode: 'cors',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ data: newObj, Item: item })\n    }\n\n    fetch('/overdueDone', requestOptions)\n      .then(res => { return res.json() })\n      //.then(resJSON=>console.log(resJSON))\n      .then(resJSON => dispatch({ type: \"SETREMINDER\", payload: resJSON }))\n  }\n\n  function submitToServer(e, index) {\n    let obj = JSON.parse(e.target.value)\n    console.log(e, index)\n    AppState.greentick.splice(index, 1, !AppState.greentick[index])\n    setParams(old => {\n      console.log(old, obj)\n      console.log({ ...old, obj })\n\n      return { ...old, obj }\n    })\n\n\n\n    let newObj = { ...props.user };\n    newObj.log.push(obj)\n\n\n    const requestOptions = {\n      method: 'POST',\n      //mode: 'cors',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ data: newObj })\n    }\n\n    fetch('/addTodo', requestOptions)\n      .then(res => { return res.json() })\n      //.then(resJSON=>console.log(resJSON))\n      .then(resJSON => dispatch({ type: \"SETREMINDER\", payload: resJSON }))\n\n  }\n\n\n  console.log(props.user)\n  const items = !inputValidator(AppState.toDoList) && AppState.toDoList.length === 0 ? <h1>Enter some valid tasks separated by commas</h1> : AppState.toDoList.map((d, index) => d === \"\" ? null : <div key={index}><li className=\"btn1\" key={index}>{d}<span onClick={() => setTime(index)} className={AppState.greentick[index] ? \"clock2\" : \"clock\"}>&#128337;</span><span className={AppState.greentick[index] ? \"greenTick1\" : \"greenTick2\"}>&#9989;</span></li><Calendar onClick={(e) => { submitToServer(e, index) }} item={d} style={AppState.vis[index] ? \"calendar1\" : \"calendar2\"} style2={AppState.greentick[index] ? \"calendar2\" : \"calendar1\"} submitStyle={AppState.greentick[index] ? \"submitted\" : \"notsubmitted\"} /></div>)\n  const items2 = props.user.overdue.map((d, i) => <li key={i}>{`Task:${d.todo}, date: ${d.date}, time:${d.time}`}<span className=\"close\" onClick={() => removeOverdue(i)} >X<span class=\"tooltiptext\">Delete Reminder?</span></span><span className=\"done\" onClick={() => overdueDone(i)} >&#9989;<span class=\"tooltiptext\">Complete?</span></span></li>)\n  const items3 = props.user.log.map((d, i) => <li key={i}>{`Task:${d.todo}, date: ${d.date}, time:${d.time}`}<span className=\"close\" onClick={() => removeReminder(i)} >X<span class=\"tooltiptext\">Delete Reminder?</span></span><span className=\"done\" onClick={() => dueDone(i)} >&#9989;<span class=\"tooltiptext\">Complete?</span></span></li>)\n  \n  return (\n\n    <div>\n      <h1 id=\"box\">Hello {props.user.username} <br></br>Your \"To Do\" List:</h1>\n      <div className=\"CssFlex\">\n      <div id=\"overdue\"><h2>Your overdue Tasks:</h2><ul>{items2}</ul></div>\n      <div id=\"readyToPlan\"><h2>You will be emailed the following reminders:</h2><ul>{items3}</ul></div>\n      </div>\n      <div id=\"textArea\">\n      <textarea\n        onChange={(e) => handleChange(e)}\n        value={AppState.userInput}\n\n        placeholder='Separate Tasks With Commas'\n      />\n      <br />\n      <button id=\"createList\" onClick={() => handleSubmit()}>Create List</button>\n      <button id=\"clearList\" onClick={() => clear()}>Clear List</button>\n      </div>\n      <div id=\"card\"><ul>{items}</ul></div>\n\n\n\n    </div>\n  );\n}\n\n\n\nexport default MyToDoComp;"]},"metadata":{},"sourceType":"module"}