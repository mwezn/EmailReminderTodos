{"ast":null,"code":"import _regeneratorRuntime from\"/home/tank/Desktop/TODO/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/home/tank/Desktop/TODO/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/tank/Desktop/TODO/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/tank/Desktop/TODO/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{React,useState,useContext}from\"react\";import{AuthContext}from'../App';export default function Login(){var _useState=useState({email:\"\",password:\"\",emailExist:null,passCorrect:null}),_useState2=_slicedToArray(_useState,2),loginCredentials=_useState2[0],setParams=_useState2[1];var _useContext=useContext(AuthContext),dispatch=_useContext.dispatch;function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var requestOptions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();requestOptions={method:'POST',//mode: 'cors',\nheaders:{'Content-Type':'application/json'},body:JSON.stringify({title:'React POST Request Example',data:loginCredentials})};fetch('http://localhost:8080/login',requestOptions).then(function(res){if(res.status===401){var newObj={passCorrect:false};setParams(function(oldObj){return _objectSpread(_objectSpread({},oldObj),newObj);});}else if(res.status===400){var _newObj={emailExist:false};setParams(function(oldObj){return _objectSpread(_objectSpread({},oldObj),_newObj);});}return res.json();}).then(function(resJSON){return dispatch({type:\"LOGIN\",payload:resJSON});}).then(function(){return console.log(localStorage.getItem('token')+\"HAHA GOTIT\");});case 3:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}function enterEmail(e){var newObj={email:e.target.value};setParams(function(oldObj){return _objectSpread(_objectSpread({},oldObj),newObj);});}function enterPassword(e){var newObj={password:e.target.value};setParams(function(oldObj){return _objectSpread(_objectSpread({},oldObj),newObj);});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{id:\"loginCard\",children:[/*#__PURE__*/_jsxs(\"form\",{id:\"loginCardItems\",onSubmit:function onSubmit(e){return handleSubmit(e);},method:\"post\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Enter Email\",onChange:function onChange(e){return enterEmail(e);},required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{for:\"pass\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"pass\",placeholder:\"Enter Password\",onChange:function onChange(e){return enterPassword(e);},required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"loginBtn\",children:\"Login\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:loginCredentials.emailExist===false?/*#__PURE__*/_jsx(\"p\",{className:\"emailTaken\",children:\"Email doesn't exist\"}):loginCredentials.passCorrect===false?/*#__PURE__*/_jsx(\"p\",{className:\"emailTaken\",children:\"Wrong Password\"}):null})})]})});};","map":{"version":3,"sources":["/home/tank/Desktop/TODO/Client/src/containers/Login.js"],"names":["React","useState","useContext","AuthContext","Login","email","password","emailExist","passCorrect","loginCredentials","setParams","dispatch","handleSubmit","event","preventDefault","requestOptions","method","headers","body","JSON","stringify","title","data","fetch","then","res","status","newObj","oldObj","json","resJSON","type","payload","console","log","localStorage","getItem","enterEmail","e","target","value","enterPassword"],"mappings":"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","sourcesContent":["import {React, useState, useContext} from \"react\";\nimport { AuthContext } from '../App'\n\n\nexport default function Login() {\n  \n  const [loginCredentials, setParams] = useState({email: \"\", password: \"\", emailExist:null, passCorrect: null});\n  const  { dispatch } = useContext(AuthContext);\n  \n\n\n\n  \n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    const requestOptions = {\n      method: 'POST',\n      //mode: 'cors',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ title: 'React POST Request Example',data: loginCredentials})\n  };\n  \n  fetch('http://localhost:8080/login',requestOptions)\n     .then(res => {\n       if (res.status===401) {\n        const newObj={passCorrect: false}\n        setParams(oldObj=>{ return {...oldObj, ...newObj}})\n      }\n      else if(res.status===400){\n        const newObj={emailExist: false}\n        setParams(oldObj=>{return {...oldObj, ...newObj}})\n      }\n      return res.json()\n    })\n    .then(resJSON=>dispatch({type: \"LOGIN\", payload: resJSON}))\n    .then(()=>console.log(localStorage.getItem('token')+\"HAHA GOTIT\"))\n  \n  }\n  \n\n  \n  function enterEmail(e){\n    const newObj={email:e.target.value}\n    setParams(oldObj=>{\n        return {...oldObj,...newObj}\n    })\n    \n  }\n  function enterPassword(e){\n    const newObj={password:e.target.value}\n    setParams(oldObj=>{\n        return {...oldObj,...newObj}\n    })\n    \n  }\n\n\n\n  return (\n    <div>\n    <div id=\"loginCard\">\n    <form id=\"loginCardItems\" onSubmit={(e)=>handleSubmit(e)} method=\"post\">\n        <label for=\"email\">Email:</label><br></br>\n        <input type=\"email\" name=\"email\" placeholder=\"Enter Email\" onChange={(e)=>enterEmail(e)} required></input><br></br>\n        <label for=\"pass\">Password:</label><br></br>\n        <input type=\"text\" name=\"pass\" placeholder=\"Enter Password\" onChange={(e)=>enterPassword(e)} required></input><br></br>\n        <button className=\"loginBtn\">Login</button>\n    </form> \n    <div><h1>{loginCredentials.emailExist===false?<p className=\"emailTaken\">Email doesn't exist</p>:loginCredentials.passCorrect===false?<p className=\"emailTaken\">Wrong Password</p>:null}</h1></div>\n    </div>\n    </div>\n    \n  );\n  };"]},"metadata":{},"sourceType":"module"}